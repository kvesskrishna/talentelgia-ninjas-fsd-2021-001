<html>

<head>
    <title>
        ajax users
    </title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
</head>

<body>

    <table class="table table-primary">
        <thead>
            <tr>
                <th>Name</th>
                <th>Username</th>
                <th>Email</th>
                <th>City</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
    <div id="mydiv"></div>
</body>
<script>
    function ajaxcall() {
        var xmlhttp = new XMLHttpRequest();

        xmlhttp.onreadystatechange = requestdemo;

        function requestdemo() {
            if (xmlhttp.readyState == XMLHttpRequest.DONE) {
                if (xmlhttp.status == 200) {
                    // document.getElementById("mydiv").innerHTML = xmlhttp.responseText;
                    console.log(typeof xmlhttp.responseText);
                    userdata = JSON.parse(xmlhttp.responseText)
                    console.log(typeof userdata)
                    let rows = ''
                    userdata.forEach(user => {
                        rows += `<tr>
                                <td>${user.name}</td>
                                <td>${user.username}</td>
                                <td>${user.email}</td>
                                <td>${user.address.city}</td>
                                </tr>`
                    })
                    console.log(rows)
                    document.querySelector('tbody').innerHTML = rows;
                }
                else if (xmlhttp.status == 400) {
                    alert('There was an error 400');
                }
                else {
                    alert('something else other than 200 was returned');
                }
            }
        }

        xmlhttp.open("GET", "https://jsonplaceholder.typicode.com/users", true);
        xmlhttp.send();
    }

    ajaxcall();
</script>

</html>